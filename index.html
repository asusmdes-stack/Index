<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>üå∏ –°–∞–∫—É—Ä–∞ –°—É–¥—å–±—ã</title>
    <script src="https://telegram.org/js/telegram-web-app.js"></script>
    <style>
        body {
            font-family: Arial, sans-serif;
            display: flex;
            justify-content: center;
            align-items: center;
            height: 100vh;
            margin: 0;
            background: #000;
            color: #fff;
        }
        button {
            padding: 15px 30px;
            font-size: 18px;
            background: linear-gradient(45deg, #ff0000, #ff4444);
            color: #fff;
            border: none;
            border-radius: 10px;
            cursor: pointer;
            box-shadow: 0 0 10px rgba(255, 0, 0, 0.5);
        }
        button:disabled {
            background: grey;
            cursor: not-allowed;
        }
    </style>
</head>
<body>
    <button id="payBtn">–û–ø–ª–∞—Ç–∏—Ç—å 10 ‚≠ê</button>
    <script>
        window.Telegram.WebApp.ready();
        window.Telegram.WebApp.expand();

        document.getElementById('payBtn').onclick = async () => {
            const btn = document.getElementById('payBtn');
            btn.textContent = 'üå∏ –°–æ–∑–¥–∞—é —Å—á—ë—Ç...';
            btn.disabled = true;

            try {
                const response = await fetch('https://telega-6jtc.onrender.com/api/invoice', {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify({ user_id: window.Telegram.WebApp.initDataUnsafe.user.id })
                });

                const data = await response.json();
                if (data.ok) {
                    window.Telegram.WebApp.openInvoice(data.invoice_id, (status) => {
                        if (status === 'paid') {
                            window.Telegram.WebApp.showAlert('üå∏ –û–ø–ª–∞—Ç–∞ –ø—Ä–æ—à–ª–∞! –ü—Ä–µ–º–∏—É–º –∞–∫—Ç–∏–≤–∏—Ä–æ–≤–∞–Ω!');
                            btn.textContent = '‚úÖ –ì–û–¢–û–í–û!';
                        } else {
                            window.Telegram.WebApp.showAlert('‚ùå –û–ø–ª–∞—Ç–∞ –æ—Ç–º–µ–Ω–µ–Ω–∞');
                            btn.textContent = '–û–ø–ª–∞—Ç–∏—Ç—å 10 ‚≠ê';
                        }
                        btn.disabled = false;
                    });
                } else {
                    window.Telegram.WebApp.showAlert('‚ùå –û—à–∏–±–∫–∞ —Å–µ—Ä–≤–µ—Ä–∞');
                    btn.textContent = '–û–ø–ª–∞—Ç–∏—Ç—å 10 ‚≠ê';
                    btn.disabled = false;
                }
            } catch (err) {
                window.Telegram.WebApp.showAlert('‚ùå –û—à–∏–±–∫–∞ —Å–æ–µ–¥–∏–Ω–µ–Ω–∏—è');
                btn.textContent = '–û–ø–ª–∞—Ç–∏—Ç—å 10 ‚≠ê';
                btn.disabled = false;
            }
        };
    </script>
</body>
</html>
